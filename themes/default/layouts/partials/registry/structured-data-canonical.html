{{ $page := . }}

{{/* Extract metadata from page parameters */}}
{{ $titleTag := $page.Params.title_tag | default "" }}
{{ $packageName := "azure-native" }}
{{ $serviceName := "" }}
{{ $resourceName := "" }}

{{ if $titleTag }}
  {{ $parts := split $titleTag "." }}
  {{ if ge (len $parts) 3 }}
    {{ $packageName = index $parts 0 }}
    {{ $serviceName = index $parts 1 }}
    {{ $resourceName = index $parts 2 }}
  {{ end }}
{{ end }}

{{/* Format service and resource names for display */}}
{{ $serviceDisplay := $serviceName | humanize | title }}
{{ $resourceDisplay := $resourceName | humanize | title }}

{{/* Create hidden canonical block with all languages for crawlers */}}
<div class="crawler-canonical-examples" style="position: absolute; left: -10000px; width: 1px; height: 1px; overflow: hidden;" aria-hidden="true">
  {{ range $lang := slice "TypeScript" "Python" "Go" "C#" "Java" "YAML" }}
    <div itemscope itemtype="https://schema.org/SoftwareSourceCode">
      <meta itemprop="name" content="Azure {{ $serviceDisplay }} {{ $resourceDisplay }} - {{ $lang }} Example" />
      <meta itemprop="description" content="Pulumi {{ $lang }} code example for creating and managing Azure {{ $serviceDisplay }} {{ $resourceDisplay }} resources using Infrastructure as Code" />
      <meta itemprop="programmingLanguage" content="{{ $lang }}" />
      <meta itemprop="codeSampleType" content="code snippet" />
      <meta itemprop="keywords" content="Azure, {{ $serviceDisplay }}, {{ $resourceDisplay }}, Pulumi, Infrastructure as Code, IaC, {{ $lang }}, Cloud, DevOps" />
      <meta itemprop="runtimePlatform" content="Microsoft Azure" />
      <meta itemprop="targetProduct" content="Pulumi Infrastructure as Code Platform" />
      <meta itemprop="codeRepository" content="https://github.com/pulumi/pulumi-{{ $packageName }}" />
      <meta itemprop="license" content="https://github.com/pulumi/pulumi-{{ $packageName }}/blob/master/LICENSE" />
      <meta itemprop="author" content="Pulumi" />
      <meta itemprop="isPartOf" content="{{ $page.Permalink }}" />
      <div itemprop="text">
        {{/* Canonical examples would contain extracted code from the page */}}
        {{/* Since we're at compile time, we could extract actual code snippets here if needed */}}
      </div>
    </div>
  {{ end }}
</div>