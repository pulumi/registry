{{ define "main" }}
    <div class="container mx-auto px-4 pt-8 mt-2">

        {{ if and (.Params.h1) (not .Params.notitle) }}
            <h1>{{ .Params.h1 }}</h1>
        {{ else if and (ne .Title "") (not .Params.notitle) }}
            <h1>{{ .Title }}</h1>
        {{ end }}

        <h1>Pulumi Packages</h1>
        <p>
            Packages are APIs to use Pulumi with Clouds, Infrastructure, Databases, Monitoring,
            Networks, Version control, and Utilities.
        </p>

        <div class="my-12 relative z-10">
            <h4 class="text-xl">Filters</h4>
            <pulumi-filter-select class="flex">

                <!-- Package-type options -->
                <pulumi-filter-select-option-group name="type">
                    <div class="toggle" slot="toggle">Type</div>
                    <div class="options">
                        <pulumi-filter-select-option value="native">Native Provider</pulumi-option>
                        <pulumi-filter-select-option value="provider">Provider</pulumi-option>
                        <pulumi-filter-select-option value="component">Component</pulumi-option>
                    </div>
                </pulumi-filter-select-option-group>

                <!-- Use-case options -->
                <pulumi-filter-select-option-group name="category" class="mx-1 md:mx-4">
                    <div class="toggle" slot="toggle">Use Case</div>
                    <div class="options">
                        <pulumi-filter-select-option value="cloud">Cloud</pulumi-option>
                        <pulumi-filter-select-option value="database">Database</pulumi-option>
                        <pulumi-filter-select-option value="infrastructure">Infrastructure</pulumi-option>
                        <pulumi-filter-select-option value="monitoring">Monitoring</pulumi-option>
                        <pulumi-filter-select-option value="network">Network</pulumi-option>
                        <pulumi-filter-select-option value="utility">Utility</pulumi-option>
                        <pulumi-filter-select-option value="version control system">Version control</pulumi-option>
                    </div>
                </pulumi-filter-select-option-group>

            </pulumi-filter-select>
        </div>
    </div>

    <div class="packages container mx-auto pb-16 z-0">
        <section class="featured-packages my-8">
            {{ $featured := slice }}
            {{ $all := $.Site.Data.registry.packages }}

            {{ range $.Site.Data.registry.packages }}
                {{ if .featured }}
                    {{ $featured = $featured | append . }}
                {{ end }}
            {{ end }}

            <h2 class="px-4 inline-flex items-center">
                Featured Cloud Providers
                <span class="featured-count ml-2 py-1 px-4 rounded-full bg-violet-600 text-white text-xl">
                    {{ len $featured }}
                </span>
            </h2>
            <div class="flex flex-wrap">
                {{ range $featured }}
                    {{ partial "registry/index/package" (dict "package" . "getStartedData" $.Site.Data.registry.getstarted "featured" true) }}
                {{ end }}
            </div>
        </section>

        <section class="all-packages my-8">
            <h2 class="px-4 inline-flex items-center">
                A-Z Packages
                <span class="all-count ml-2 py-1 px-4 rounded-full bg-violet-600 text-white text-xl">
                    {{ len $all }}
                </span>
            </h2>
            <div class="flex flex-wrap">
                {{ range $all }}
                    {{ partial "registry/index/package" (dict "package" .) }}
                {{ end }}
                <div class="no-results px-4">
                    <p>
                        Looks like we don't have any packages that match your filters.
                        Adjust or clear the filters and try again.
                    </p>
                    <button class="reset btn btn-lg">Clear all filters</button>
                </div>
            </div>
        </section>
    </div>
{{ end }}
