import{r as e,h as o,H as t,g as n}from"./p-68998d96.js";const s=class{constructor(o){e(this,o),this.redirectUrl="/pulumi-up/thank-you/",this.isModalOpen=!1,this.displayingContent="session-select",this.selectedSessions=[],this.skippedSessionSelection=!1,this.processingFormSubmissions=!1,this.formProcessor=void 0,this.error=void 0,this.submittedFormValues={},this.onMessage=e=>{var o;if("hsFormCallback"!==(null===(o=e.data)||void 0===o?void 0:o.type)||!this.isModalOpen)return;const t=e.data.eventName;if("onFormReady"===t&&this.processingFormSubmissions&&this.handleFormSubmissions(),"onFormSubmit"===t){const e=this.el.querySelectorAll("form input"),o={};e.forEach((e=>{"checkbox"!==e.type&&(o[e.name]=e.value)})),this.submittedFormValues=o,setTimeout((()=>{this.selectedSessions=[...this.selectedSessions.slice(1)],this.processingFormSubmissions=!0,0===this.selectedSessions.length&&(window.location.href=this.redirectUrl)}),500)}},this.handleButtonClick=e=>{e.preventDefault(),this.isModalOpen=!0,document.querySelector("body").className+=" disable-scroll"},this.handleCloseModal=e=>{e.preventDefault(),this.isModalOpen=!1,this.skippedSessionSelection||(this.displayingContent="session-select",this.selectedSessions=[]),document.querySelector("body").className=document.querySelector("body").className.replace("disable-scroll","")},this.handleSessionSelection=e=>{const o=this.selectedSessions.indexOf(e);-1===o?this.selectedSessions.push(e):this.selectedSessions.splice(o,1)},this.handleGotToSessionSelect=e=>{e.preventDefault(),this.displayingContent="session-select"}}handleEventSessionInfo(e){this.parsedEventSessions=JSON.parse(e)}handleSkipSessionSelection(e){1===e.length&&(this.selectedSessions.push(e[0].hubspot_form_id),this.displayingContent="form",this.skippedSessionSelection=!0)}componentWillLoad(){this.handleEventSessionInfo(this.eventSessions),this.handleSkipSessionSelection(this.parsedEventSessions)}componentDidLoad(){window.addEventListener("message",this.onMessage)}disconnectedCallback(){window.removeEventListener("message",this.onMessage)}handleGoToForm(e,o){e.preventDefault(),0!==this.selectedSessions.length?(this.displayingContent=o,this.error=void 0):this.error="You must select at least one of the above options."}handleFormSubmissions(){0!==this.selectedSessions.length?(this.el.querySelectorAll("form input[type='checkbox']")[1].click(),setTimeout((()=>{const e=Object.keys(this.submittedFormValues);if(e.length>0)for(let o=0;o<e.length;o++){const t=e[o];if(""===t)continue;const n=this.el.querySelector(`form input[name="${t}"]`);n.value=this.submittedFormValues[t],n.dispatchEvent(new Event("change"))}}),500),setTimeout((()=>{this.el.querySelector("form input[type='submit']").click()}),500)):window.location.href=this.redirectUrl}renderSessionSelectionItem(e){const t=this.selectedSessions.indexOf(e.hubspot_form_id)>-1;return o("li",null,o("label",{class:"session-selection-item"},o("div",{class:"checkbox-container"},o("input",{type:"checkbox",id:e.title,name:e.title,onChange:()=>this.handleSessionSelection(e.hubspot_form_id),checked:t}),o("span",{class:"checkmark"})),o("div",{class:"checkbox-label"},o("h6",null,e.title),o("p",null,e.description))))}renderSessionSelectContent(){return[o("div",{class:"session-select-container"},o("p",null,"Please select all the options you'd like to register for:"),o("ul",{class:"session-select-list"},this.parsedEventSessions.map((e=>this.renderSessionSelectionItem(e))))),o("div",{class:"next-button-container"},o("a",{href:"#",class:`${this.buttonClass} modal-button`,onClick:e=>this.handleGoToForm(e,"form")},"Next"),this.error?o("p",{class:"error-message"},this.error):null)]}renderForm(e){return this.processingFormSubmissions?o("div",null,o("h4",null,o("i",{class:"fas fa-spinner fa-spin"})),o("div",{class:"invisible",ref:e=>this.formProcessor=e},o("pulumi-hubspot-form",{key:e,formId:e}))):o("div",{class:"registration-form-container"},this.skippedSessionSelection?null:o("a",{href:"#",onClick:this.handleGotToSessionSelect},"‚Üê Go back to select sessions."),o("div",{class:"registration-form"},o("pulumi-hubspot-form",{formId:this.selectedSessions[0]})))}renderContent(){switch(console.log("rendering content"),this.displayingContent){case"session-select":return this.renderSessionSelectContent();case"form":return console.log("rendering form"),this.renderForm(this.selectedSessions[0])}}renderModal(){return o("div",{class:"event-session-modal-container"},o("div",{class:"modal-container"},o("div",{class:"modal"},o("div",{class:"title-container"},o("div",{class:"title-text"},o("h4",null,this.modalTitle)),o("div",{class:"close-icon"},o("i",{class:"fa fa-times",onClick:this.handleCloseModal}))),this.renderContent())))}render(){return o(t,null,o("div",null,o("div",null,o("a",{class:this.buttonClass,href:"#",onClick:this.handleButtonClick},this.buttonText)),this.isModalOpen?this.renderModal():null))}get el(){return n(this)}static get watchers(){return{eventSessions:["handleEventSessionInfo"]}}};s.style=':host{display:block}.event-session-modal-container{position:fixed;width:100%;height:100%;background-color:black;z-index:9999;top:0;left:0}.event-session-modal-container .hidden{display:none}.event-session-modal-container .modal-container{display:flex;align-items:center;justify-content:center;width:100%;height:100%}.event-session-modal-container .modal-container h2,.event-session-modal-container .modal-container h3,.event-session-modal-container .modal-container h4,.event-session-modal-container .modal-container h5,.event-session-modal-container .modal-container h6,.event-session-modal-container .modal-container p{color:black}.event-session-modal-container .modal-container .modal{height:85%;width:85%;background-color:white;border-radius:5px;padding:1.5rem;overflow-y:scroll}.event-session-modal-container .modal-container .modal .title-container{display:flex;border-bottom:1px solid black}.event-session-modal-container .modal-container .modal .title-container .title-text{width:75%;text-align:left}.event-session-modal-container .modal-container .modal .title-container .title-text h2{color:black}.event-session-modal-container .modal-container .modal .title-container .close-icon{width:25%;text-align:right}.event-session-modal-container .modal-container .modal .title-container .close-icon i{cursor:pointer;font-size:1.5rem}.event-session-modal-container .modal-container .modal .session-select-container{text-align:left}.event-session-modal-container .modal-container .modal .session-select-container p{font-size:1.25rem;margin-top:2rem}.event-session-modal-container .modal-container .modal .session-select-list{list-style:none;text-align:left;display:flex;flex-wrap:wrap;align-items:stretch}.event-session-modal-container .modal-container .modal .session-select-list .checkbox-container{width:10%;position:relative;cursor:pointer}.event-session-modal-container .modal-container .modal .session-select-list .checkbox-container input{position:absolute;opacity:0;height:0;width:0}.event-session-modal-container .modal-container .modal .session-select-list .checkbox-container .checkmark{position:absolute;height:25px;width:25px;border:2px solid #805ac3;border-radius:5px;background-color:white}.event-session-modal-container .modal-container .modal .session-select-list .checkbox-container .checkmark:after{content:"";position:absolute;display:none;left:8px;top:5px;width:5px;height:10px;border:solid white;border-width:0 3px 3px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.event-session-modal-container .modal-container .modal .session-select-list .checkbox-container input:checked~.checkmark{background-color:#805ac3}.event-session-modal-container .modal-container .modal .session-select-list .checkbox-container input:checked~.checkmark:after{display:block}.event-session-modal-container .modal-container .modal .session-select-list .checkbox-label{width:90%}.event-session-modal-container .modal-container .modal .session-select-list li{width:50%;padding:0.75rem}@media (max-width: 1024px){.event-session-modal-container .modal-container .modal .session-select-list li{width:100%}}.event-session-modal-container .modal-container .modal .session-select-list .session-selection-item{height:100%;display:flex;justify-items:center;align-items:start;cursor:pointer;border:1px solid black;border-radius:5px;padding:1rem;border-radius:5px}.event-session-modal-container .modal-container .modal .session-select-list .session-selection-item:hover{background-color:#f9f9fa}.event-session-modal-container .modal-container .modal .session-select-list .session-selection-item p{font-size:1rem;margin-top:0.5rem}@media (max-width: 1024px){.event-session-modal-container .modal-container .modal .session-select-list .session-selection-item h6{padding-left:1rem}}.event-session-modal-container .modal-container .modal .next-button-container{text-align:right}.event-session-modal-container .modal-container .modal .next-button-container .modal-button{display:inline-block}.event-session-modal-container .modal-container .modal .next-button-container .modal-button:hover{background-color:#4d3675}.event-session-modal-container .modal-container .modal .next-button-container .error-message{color:red}.event-session-modal-container .modal-container .modal .registration-form-container{text-align:left;padding-top:0.5rem}.event-session-modal-container .modal-container .modal .registration-form-container a{color:black}.event-session-modal-container .modal-container .modal .registration-form-container a:hover{text-decoration:underline}.event-session-modal-container .modal-container .modal .registration-form{max-width:36rem;margin:0 auto;text-align:left}.event-session-modal-container .modal-container .modal .registration-form form{padding:0.25rem}.event-session-modal-container .modal-container .modal .registration-form a{color:black;text-decoration:underline}.event-session-modal-container .modal-container .modal .registration-form a:hover{font-weight:bold}';export{s as event_session_registration_modal}